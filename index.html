<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Radio Arturo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;Radio Arturo&quot;,
  &quot;short_name&quot;:&quot;RadioArturo&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#020617&quot;,
  &quot;theme_color&quot;:&quot;#22d3ee&quot;
}">

<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config={darkMode:'class',theme:{extend:{colors:{bg:"#020617",accent:"#22d3ee"}}}}
</script>

<script src="https://unpkg.com/@phosphor-icons/web"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
::-webkit-scrollbar{display:none}
@keyframes spin{to{transform:rotate(360deg)}}
.animate-spin-slow{animation:spin 10s linear infinite}
</style>
</head>

<body class="bg-bg text-white">
<div id="root"></div>

<script type="text/babel">
const {useState,useEffect,useRef}=React
const COUNT="ut_wrbgRkczfbovlvAS0v4umgmKBpnP7Cu3e7YpXPm0"

function App(){
const [stations,setStations]=useState([])
const [current,setCurrent]=useState(null)
const [playing,setPlaying]=useState(false)
const [search,setSearch]=useState("")
const audioRef=useRef(null)
const canvasRef=useRef(null)

useEffect(()=>{load("Mexico")},[])

async function load(c){
 const r=await fetch("https://de1.api.radio-browser.info/json/stations/bycountry/"+c)
 const d=await r.json()
 setStations(d.filter(s=>s.url_resolved?.startsWith("https")))
}

function play(s){
 setCurrent(s)
 setTimeout(()=>audioRef.current.play(),200)
 setPlaying(true)
}

/* Visualizador Mobile Friendly */
useEffect(()=>{
 if(!audioRef.current||!canvasRef.current)return
 const AudioCtx=window.AudioContext||window.webkitAudioContext
 const ctxAudio=new AudioCtx()
 const src=ctxAudio.createMediaElementSource(audioRef.current)
 const analyser=ctxAudio.createAnalyser()
 analyser.fftSize=64
 src.connect(analyser)
 analyser.connect(ctxAudio.destination)

 const buffer=new Uint8Array(analyser.frequencyBinCount)
 const c=canvasRef.current
 const ctx=c.getContext("2d")

 function draw(){
  requestAnimationFrame(draw)
  analyser.getByteFrequencyData(buffer)
  ctx.clearRect(0,0,c.width,c.height)
  const cx=c.width/2, cy=c.height/2, radius=c.width*0.18
  buffer.forEach((v,i)=>{
    const ang=(i/buffer.length)*Math.PI*2
    const len=v/3
    const x1=cx+Math.cos(ang)*radius
    const y1=cy+Math.sin(ang)*radius
    const x2=cx+Math.cos(ang)*(radius+len)
    const y2=cy+Math.sin(ang)*(radius+len)
    ctx.strokeStyle=`rgba(34,211,238,${v/255})`
    ctx.lineWidth=2
    ctx.beginPath()
    ctx.moveTo(x1,y1)
    ctx.lineTo(x2,y2)
    ctx.stroke()
  })
 }
 draw()
},[current])

return(
<div className="h-screen flex flex-col">

<header className="p-3 flex items-center gap-3 border-b border-slate-800">
<img src="https://i.ibb.co/8LNH1SBm/Chat-GPT-Image-6-ene-2026-11-20-07-a-m.png" className="w-10 h-10 rounded-xl"/>
<div className="font-bold text-accent">Radio Arturo</div>
</header>

<div className="p-3">
<input value={search} onChange={e=>setSearch(e.target.value)} placeholder="Buscar estación..."
className="w-full p-3 rounded bg-slate-900 text-white"/>
</div>

<div className="flex-1 overflow-auto px-3 space-y-3">
{stations.filter(s=>s.name.toLowerCase().includes(search.toLowerCase())).map(s=>(
<div key={s.stationuuid} className="flex items-center gap-3 bg-slate-900 p-3 rounded-xl">
<img src={s.favicon||"https://upload.wikimedia.org/wikipedia/commons/8/84/Radio_icon.png"} className="w-12 h-12 rounded"/>
<div onClick={()=>play(s)} className="flex-1 cursor-pointer">
<div className="truncate font-semibold">{s.name}</div>
<div className="text-xs text-slate-400">{s.country}</div>
</div>
</div>
))}
</div>

{/* Player */}
<div className="p-4 bg-slate-900/80 backdrop-blur-xl border-t border-cyan-500/20">
{current && <audio ref={audioRef} src={current.url_resolved} crossOrigin="anonymous"/>}

<div className="flex flex-col items-center">

<div className="relative mb-3">
<img src={current?.favicon||"https://upload.wikimedia.org/wikipedia/commons/8/84/Radio_icon.png"}
className={`w-20 h-20 rounded-full border-2 border-accent ${playing?"animate-spin-slow":""}`}/>
<div className="absolute inset-0 blur-xl bg-cyan-400 opacity-30 rounded-full"></div>
</div>

<div className="font-bold truncate">{current?.name||"Selecciona una estación"}</div>

<button onClick={()=>{playing?audioRef.current.pause():audioRef.current.play();setPlaying(!playing)}}
className="mt-3 p-4 rounded-full bg-accent text-black text-xl shadow-xl">
<i className={`ph ${playing?"ph-pause":"ph-play"}`}></i>
</button>

<canvas ref={canvasRef} width="280" height="120" className="mt-4 w-full max-w-xs"></canvas>

<input type="range" min="0" max="1" step="0.01" onChange={e=>audioRef.current.volume=e.target.value}
className="w-full max-w-xs mt-3 accent-cyan-400"/>

</div>
</div>

<div className="text-center text-xs p-2 text-slate-400">
Realizado por Arturo T.
</div>

</div>
)
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>)
</script>
</body>
</html>
